<!DOCTYPE html>
<html>
    <head>
        <title>POI-Suche in Bochum</title>
    
        <meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"  />
		
		<script src="js/leaflet1.0.2.js"></script>
        <script src="js/label.js"></script>
        <script src="js/Autolinker.min.js"></script>
		<script src="js/easy-button.js"></script>
		<script src="js/Control.Loading.js"></script>

		<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="css/leaflet1.0.2.css" />
        <link rel="stylesheet" type="text/css" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/label.css" />
		<link rel="stylesheet" href="css/leaflet-search.css" />	
		<link rel="stylesheet" href="css/easy-button.css" />
		<link rel="stylesheet" href="css/leaflet-gps.css" />
		<link rel="stylesheet" href="css/Control.Loading.css" />
		<link rel="stylesheet" href="css/L.Control.Locate.css" />
		<link rel="stylesheet" href="css/mobile.css" />
		<link rel="stylesheet" href="css/L.Control.Sidebar.css" />
		<link rel="stylesheet" href="css/leaflet-gps.css" />

		
		
    </head>
	    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html, body, #map {
            height: 100%;
        }

        .lorem {
            font-style: italic;
            color: #AAA;
        }
		
		 #sidebar {
            height: 50%;
			width:55%;
			margin-top:20%;
			margin-left:45%;
        }
    </style>
	
	
    <body>
	    <div id="sidebar">
        <h1>Informationen</h1>

        <p></p>

        <p><b></b></p>

        <p></p>

        <ul>
            <li><a href=></a></li>
            <li><a href=></a></li>
        </ul>

        <p class="lorem">Test</p>

        <p class="lorem">123</p>

        <p class="lorem">Sahira</p>

        <p class="lorem">Kai</p>
    </div>
	
        <div id="map"></div>
        <script src="data/json_Alle.js"></script>
		<script src="js/leaflet-search.js"></script>
		<script src="js/easy-button.js"></script>
		<script src="js/leaflet-gps.js"></script>
		<script src="js/L.Control.Locate.js" ></script>
		<script src="js/L.Control.Sidebar.js"></script>
		<link rel="stylesheet" href="css/leaflet-search.css" />	
		<link rel="stylesheet" href="css/easy-button.css" />

        <script>

		//Einrichtung der maxBounds
		var southWest = L.latLng(51.4566, 7.26);
		var northEast = L.latLng(51.4355, 7.27);
		
		//Einrichtung der Basiskarte
		var map = L.map('map', {
		zoomControl:false,
		maxBounds: L.latLngBounds(southWest, northEast)
		}).setView([51.4513690683,7.27304188159], 12);
       	var basemap = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
		maxZoom: 16,
		id: 'mapbox.streets'
		}).addTo(map);
		
        var sidebar = L.control.sidebar('sidebar', {
            closeButton: true,
            position: 'right'
        });
        map.addControl(sidebar);
		
		
		//Sidebar 
		
		/*sidebar.toggle();


        var marker = L.marker([51.2, 7]).addTo(map).on('click', function () {
            sidebar.toggle();
        });

        map.on('click', function () {
            sidebar.hide();
        })

        L.DomEvent.on(sidebar.getCloseButton(), 'click', function () {
        });
	*/
		//Einrichtung des Loaders
		var loadingControl = L.Control.loading({
                    separate: true
                });
                map.addControl(loadingControl); 
				
	
	
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------	
	
        var feature_group = new L.featureGroup([]);
        var bounds_group = new L.featureGroup([]);
        var raster_group = new L.LayerGroup([]);
	
	
        var layerOrder = new Array();
        function restackLayers() {
            for (index = 0; index < layerOrder.length; index++) {
                layerOrder[index].bringToFront();
            }
        }
        map.on('overlayadd', restackLayers);
        layerControl = L.control.layers({},{},{collapsed:false});
		
	


        
		//Einrichtung aller Ober- und Unterkategorien: Anzeige der PopUps, Hervorheben bei MouseOver, Punktdarstellung auf der Karte, Deklarierung als geoJason zum entschlüsseln und darstellen der enthaltenen Objekte
        function pop_Alle(feature, layer) {
		
            
			var popupContent = '<table><tr><th scope="row">BEZ</th><td>' + Autolinker.link(String(feature.properties['BEZ'])) + '</td></tr><tr><th scope="row">NAME</th><td>' + Autolinker.link(String(feature.properties['NAME'])) + '</td></tr><tr><th scope="row">TELEFON</th><td>' + Autolinker.link(String(feature.properties['TELEFON'])) + '</td></tr><tr><th scope="row">OEFFNUNG</th><td>' + Autolinker.link(String(feature.properties['OEFFNUNG'])) + '</td></tr><tr><th scope="row">WWW</th><td>' + Autolinker.link(String(feature.properties['WWW'])) + '</td></tr><tr><th scope="row">EMAIL</th><td>' + Autolinker.link(String(feature.properties['EMAIL'])) + '</td></tr><tr><th scope="row">STRASSE</th><td>' + Autolinker.link(String(feature.properties['STRASSE'])) + '</td></tr><tr><th scope="row">ORT</th><td>' + Autolinker.link(String(feature.properties['ORT'])) + '</td></tr><tr><th scope="row">BEMERKUNG</th><td>' + Autolinker.link(String(feature.properties['BEMERKUNG'])) + '</td></tr><tr><th scope="row">PLZ</th><td>' + Autolinker.link(String(feature.properties['PLZ'])) + '</td></tr><tr><th scope="row">Hkat</th><td>' + Autolinker.link(String(feature.properties['Hkat'])) + '</td></tr><tr><th scope="row">Nkat</th><td>' + Autolinker.link(String(feature.properties['Nkat'])) + '</td></tr></table>';

			layer.bindPopup(popupContent);
        }

        function doStyleAlle() {
            return {
                radius: 0.0,
                fillColor: '#e31a1c',
                color: '#000000',
                weight: 0.0,
                opacity: 1.0,
                dashArray: '',
                fillOpacity: 0.0
            }
        }
		
		
        function doPointToLayerAlle(feature, latlng) {
            return L.circleMarker(latlng, doStyleAlle())
        }
        var json_AlleJSON = new L.geoJson(json_Alle, {
			onEachFeature: pop_Alle, 
            pointToLayer: doPointToLayerAlle
            });

			


	//Einrichtung des Maßstabes	   
	  // L.control.scale({options: {position: 'bottomleft',maxWidth: 100,metric: true,imperial: false,updateWhenIdle: false}}).addTo(map);
  

	//Einrichtung der Suchmaske nach Inhabernamen

	var searchName = new L.Control.Search({layer: L.featureGroup([json_AlleJSON]) ,
	textPlaceholder: 'Bitte einen Suchbegriff eingeben',
	propertyName: 'NAME',
	circleLocation: false,
	markerLocation:true,
	zoom: null});
	
	//var marker;
	searchName.on('search_locationfound', function(e) {

    e.layer.setStyle({radius: 5.0, fillColor: 'red', color: 'red', fillOpacity: 1});
	
	  //marker = new L.Marker(e.latlng).bindPopup("popupContent");
	 // marker.on('click', OnClick);
	  //map.addLayer(marker);
	});
	
	map.addControl(searchName);
	
		//function OnClick(f) {
		//marker.bindPopup('TEST').openPopup();
		//e.layer.openPopup().openOn(map);
		//}; 

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


	//GPS-Control einrichten
	//	map.addControl( new L.Control.Gps({autoActive:false}) );					
	
	L.control.locate({
    strings: {
        title: "Standort anzeigen"
    },
	
}).addTo(map);
	
    </script>

</body>
</html>